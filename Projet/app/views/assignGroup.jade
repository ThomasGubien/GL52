extends layout

script(src="routes/assignGroup.js")

block content
  .col-md-6
    .card
      .card-header
        strong Groupes affectées au questionnaire
      .card-body.card-block
        table.table
          thead
            tr
              th(scope='col') #
              th(scope='col') Nom Groupe
              th(scope='col') Droits d'accès
              th(scope='col') Gestionnaire
              th(scope='col') Actions
          tbody
            for group in affectedGroup
              tr
                td= group._id
                td= group.name
                td           
                  if(group.rights)  
                    form(action='/assignGroup/modifyRightsGroup?groupId='+group._id, method='POST')
                      label Droit de lecture 
                      input(type='checkbox', name='read', value='#{ JSON.stringify((group.rights.read))}', checked=group.rights.read)
                      label Droit d'écriture 
                      input(type='checkbox', name='write', value='#{ JSON.stringify((group.rights.write))}', checked=group.rights.write)
                      button(type='submit') Appliquer les droits
                td= group.gestionnaire
                td.t(style='width:20%')
                  form(action='/assignGroup/delinkGroup?groupId='+group._id, method='POST')
                    button.btn.btn-warning.btn-sm(type='modify')
                      i.fa.fa-pencil
                    button.btn.btn-danger.btn-sm(type='delete')
                      i.fa.fa-trash
                    button.btn.btn-dark.btn-sm(type='close')
                      i.fa.fa-ban
                    button(type='submit') Desassigner un groupe
  .col-md-6
    .card
      .card-header
        strong Liste des groupes
      .card-body.card-block
        table.table
          thead
            tr
              th(scope='col') Nom Groupe
              th(scope='col') Gestionnaire
              th(scope='col') Actions
          tbody
            for group in availableGroups
              tr
                td= group.name
                td= group.gestionnaire
                td.t(style='width:20%')
                  form(action='/assignGroup/linkGroup?groupId='+group._id, method='POST')
                    button.btn.btn-warning.btn-sm(type='modify')
                      i.fa.fa-pencil
                    button.btn.btn-danger.btn-sm(type='delete')
                      i.fa.fa-trash
                    button.btn.btn-dark.btn-sm(type='close')
                      i.fa.fa-ban 
                    label Droit de lecture
                    input(type='checkbox', name='read', value='read') 
                    label Droit d'écriture
                    input(type='checkbox', name='write', value='write') 
                    button(type='submit') Assigner un groupe